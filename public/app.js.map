{"version":3,"sources":["app/initialize.js","app/states/boot.js","app/states/game.js","app/states/login.js","app/states/menu.js"],"names":["game","window","GAME","Phaser","Game","height","renderer","AUTO","width","state","add","require","start","module","exports","init","input","maxPointers","renderSession","roundPixels","tweens","frameBased","whitePixel","bitmapData","fill","bar","addToWorld","alignIn","world","bounds","CENTER","plugin","PhaserInput","Plugin","preload","scale","scaleMode","ScaleManager","SHOW_ALL","setScreenSize","pageAlignHorizontally","pageAlignVertically","forceSingleUpdate","load","atlasJSONHash","setPreloadSprite","image","spritesheet","tilemap","Tilemap","TILED_JSON","audio","create","shutdown","destroy","self","speed","time","events","Timer","SECOND","music","sound","play","score","health","coinValue","gameOver","physics","startSystem","Physics","ARCADE","arcade","gravity","y","enableCollision","background","tileSprite","fixedToCamera","map","addTilesetImage","scenarioLayer","createLayer","foregroundLayer","groundLayer","underwaterLayer","alpha","specialBoxesLayer","setCollisionBetween","enemies","group","enableBody","createFromObjects","callAll","setAll","forEach","bee","tween","to","x","Easing","Back","InOut","coins","style","font","scoreText","text","anchor","setTo","infoText","centerX","visible","mouth","sprite","camera","nose","mouthText","align","boundsAlignH","boundsAlignV","noseText","switchAlphaInstructions","hearts","i","heart","overlayBackground","set","overlayText","addChild","okBtn","inputEnabled","useHandCursor","okBtnText","onInputUp","restart","pauseButton","console","log","stopTheCamera","resume","paused","isPaused","duck","centerY","enable","body","collideWorldBounds","animations","allowDrag","drag","maxVelocity","follow","deadzone","Rectangle","resizeWorld","cursors","keyboard","createCursorKeys","down","onDown","velocity","up","update","stop","displayOverlay","pause","tilePosition","collide","duckCollision","duckProcessCallback","hitSpecialBoxes","overlap","collectCoin","thisy","Math","abs","isDown","acceleration","quit","player","tile","object","key","allowGravity","blocked","tint","angle","Linear","None","yoyo","length","currentHeart","getAt","loadTexture","resetPlayer","coin","setText","kill","box","removeTile","choice","rnd","between","showAndRemoveText","Quadratic","togglePause","message","arrayElements","gameState","title","nameInput","inputField","padding","borderWidth","borderColor","borderRadius","placeHolder","passwordInput","type","InputType","password","xhr","XMLHttpRequest","open","onload","users","JSON","parse","responseText","readyState","status","table","error","send","checkLoginBtn","chechLoginText","onInputDown","checkLogin","value","bind","startGame","name","loginButton","button","logintext","loginPage"],"mappings":"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","file":"public/app.js","sourcesContent":["var game = window.GAME = new Phaser.Game({\n  // See <https://photonstorm.github.io/phaser-ce/global.html#GameConfig>\n  // antialias:               true,\n  // backgroundColor:         0x000000,\n  // disableVisibilityChange: false,\n  // enableDebug:             true,\n  height:                  630,\n  renderer:                Phaser.AUTO,\n  // resolution:              1,\n  // scaleMode:               Phaser.ScaleManager.NO_SCALE,\n  // transparent:             false,\n  width:                   800,\n});\n\ngame.state.add('boot', require('states/boot'));\ngame.state.add('game', require('states/game'));\ngame.state.add('menu', require('states/menu'));\ngame.state.add('login', require('states/login'));\n\ngame.state.start('boot');\n","module.exports = {\n\n  init: function () {\n    this.input.maxPointers = 1;\n    this.game.renderer.renderSession.roundPixels = true;\n    this.tweens.frameBased = true;\n\n    this.whitePixel = this.add.bitmapData(1, 1);\n    this.whitePixel.fill(255, 255, 255);\n    \n    this.bar = this.whitePixel.addToWorld();\n    this.bar.width = 100;\n    this.bar.height = 10;\n    this.bar.alignIn(this.world.bounds, Phaser.CENTER);\n\n\t\t// importing plugin to handle input boxes\n\t\tthis.add.plugin(PhaserInput.Plugin);\n  },\n\n  preload: function () {\n\n\t\tthis.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n\t\tthis.scale.setScreenSize = true;\n\t\tthis.scale.pageAlignHorizontally = true;\n\t\tthis.scale.pageAlignVertically = true;\n\t\tthis.forceSingleUpdate = true;\n\n\t\t// load UI elements\n\t\tthis.load.atlasJSONHash('button', 'assets/sprites/button.png', 'assets/sprites/button.json');\n\n\t\t// load general assets\n    this.load.setPreloadSprite(this.bar);\n    this.load.image('background', 'assets/sprites/bg_desert.png');\n    this.load.spritesheet('duck', 'assets/sprites/chick.png', 16, 18);\n\t\tthis.load.spritesheet('coin', 'assets/sprites/coin.png', 32, 32);\n\t\tthis.load.image('heartFull', 'assets/sprites/hud_heartFull.png');\n\t\tthis.load.image('heartEmpty', 'assets/sprites/hud_heartEmpty.png');\n\t\tthis.load.image('overlay', 'assets/sprites/overlay.png');\n\t\tthis.load.image('pauseButton', 'assets/sprites/pause_button.png');\n\t\t// this.load.image('arrowUp', 'assets/sprites/arrow.png');\n\t\tthis.load.image('mouth', 'assets/sprites/mouth.png');\n\t\tthis.load.image('nose', 'assets/sprites/nose.png');\n\n\t\t// loading bee animation\n\t\tthis.load.spritesheet('bee', 'assets/sprites/bee.png', 56, 48);\n\n    // loading tileset\n\t\t// this.load.tilemap('tilemap', 'assets/tilemaps/level2.json', null, Phaser.Tilemap.TILED_JSON);\n\t\tthis.load.tilemap('tilemap', 'assets/tilemaps/fast_exhalations_dolphin.json', null, Phaser.Tilemap.TILED_JSON);\n\t\tthis.load.image('tiles', 'assets/tilemaps/tiles_spritesheet.png');\n\t\tthis.load.image('bee_tiles', 'assets/sprites/bee.png');\n\n\n\t\t// load song\n\t\tthis.load.audio('song', ['assets/audio/song.mp3', 'assets/audio/song.ogg']);\n  },\n\n  create: function () {\n    this.state.start('menu');\n  },\n  \n  shutdown: function () {\n    this.whitePixel.destroy();\n    this.whitePixel = null;\n  }\n\n};\n","module.exports = {\n\n  create: function () {\n\n  \tvar world = this.world;\n  \t// keep reference of Scene scope\n  \tvar self = this;\n    // set the velocity to which the level moves\n\t\tvar speed = this.speed = 3;\n\n\t\t// delay the music start\n\t\tthis.time.events.add(Phaser.Timer.SECOND * 7.8, function(){\n\t\t\tself.music = self.sound.play('song');\n\t\t}, this);\n\n\t\tthis.score = 0;\n\t\tthis.health = 60;\n\t\tthis.coinValue = 10;\n\t\tthis.gameOver = false;\n\n    // start the arcade physics system\n\t\tthis.physics.startSystem(Phaser.Physics.ARCADE);\n\t\tthis.physics.arcade.gravity.y = 500;\n\t\tthis.enableCollision = true;\n\n\t\tvar background = this.background = this.add.tileSprite(0,0, world.width, world.height, 'background');\n\t\tbackground.fixedToCamera = true;\n\n    // tileset creation\n\t\tthis.map = this.game.add.tilemap('tilemap');\n\t\tthis.map.addTilesetImage('tiles_spritesheet', 'tiles');\n\t\tthis.map.addTilesetImage('Enemy', 'bee_tiles');\n\n\t\t// Import the tileset layers\n\t\tvar scenarioLayer = this.scenarioLayer = this.map.createLayer('Scenario');\n\t\tvar foregroundLayer = this.foregroundLayer = this.map.createLayer('Foreground');\n\t\tvar groundLayer = this.groundLayer = this.map.createLayer('Ground');\n\t\tvar underwaterLayer = this.underwaterLayer = this.map.createLayer('Underwater');\n\t\tunderwaterLayer.alpha = 0.7;\n\t\tvar specialBoxesLayer = this.specialBoxesLayer = this.map.createLayer('SpecialBoxes');\n\n\t\tthis.map.setCollisionBetween(1, 200, true, 'Scenario');\n\t\tthis.map.setCollisionBetween(1, 200, true, 'Foreground');\n\t\tthis.map.setCollisionBetween(1, 200, true, 'Underwater');\n\t\tthis.map.setCollisionBetween(1, 200, true, 'SpecialBoxes');\n\t\t// this.map.setCollisionBetween(1, 200, true, 'Ground');\n\n\t\t// Import enemies as objects\n\t\tthis.enemies = this.add.group();\n\t\tthis.enemies.enableBody = true;\n\n\t\t// load enemies from tiled map\n\t\tthis.map.createFromObjects('Enemies', 157, 'bee', 0, true, false, this.enemies);\n\t\t// create animation for all children of enemies group\n\t\tthis.enemies.callAll('animations.add', 'animations', 'fly', [0,2], 10, true);\n\t\tthis.enemies.callAll('animations.play', 'animations', 'fly');\n\t\tthis.enemies.callAll('animations.add', 'animations', 'dead', [1], 10, true);\n\t\tthis.enemies.setAll('body.allowGravity', false);\n\n\t\t// make enemies pulse to rhythm\n\t\tthis.enemies.forEach(function (bee) {\n\t\t\tself.add.tween(bee.scale).to( {x:1.2, y: 1.2}, 480, Phaser.Easing.Back.InOut, true, 0, false);\n\t\t});\n\n\t\t// Import coins\n\t\tthis.coins = this.add.group();\n\t\tthis.coins.enableBody = true;\n\t\t// load coins from tiled map\n\t\tthis.map.createFromObjects('Coins', 161, 'coin', 0, true, false, this.coins);\n\t\t// create animation for all children of coins group\n\t\tthis.coins.callAll('animations.add', 'animations', 'spin', [0, 1, 2, 3, 4, 5], 10, true);\n\t\tthis.coins.callAll('animations.play', 'animations', 'spin');\n\t\tthis.coins.setAll('body.allowGravity', false);\n\n\t\t// Score text\n\t\tthis.style = { font: \"bold 24px Arial\", fill: \"#000\"};\n\t\tthis.scoreText = this.add.text(400, 40, \"score: 0\", this.style);\n\t\tthis.scoreText.anchor.setTo(0.5, 0.5);\n\t\t// fix to camera\n\t\tthis.scoreText.fixedToCamera = true;\n\n\t\t// info text for special boxes\n\t\tthis.infoText = this.add.text(this.world.centerX, this.world.height*0.3, 'Special boxes');\n\t\tthis.infoText.anchor.setTo(0.5, 0.5);\n\t\tthis.infoText.visible = false;\n\t\t// fix to camera\n\t\tthis.infoText.fixedToCamera = true;\n\n\t\t/*\n\t\t*\n\t\t* Initial instructions when the game starts\n\t\t*\n\t\t* */\n\n\t\t// arrows for instructions at the beginning\n\t\t// var arrowUp = this.arrowUp = this.add.sprite(this.world.centerX*0.6, this.world.height*0.4, 'arrowUp');\n\t\t// arrowUp.scale.setTo(0.05,0.05);\n\t\t// arrowUp.anchor.setTo(.5,.5);\n\t\t// arrowUp.fixedToCamera = true;\n\t\t//\n\t\t// var arrowDown = this.arrowDown = this.add.sprite(this.world.centerX*0.6, this.world.height*0.5, 'arrowUp')\n\t\t// arrowDown.scale.setTo(0.05,0.05);\n\t\t// arrowDown.anchor.setTo(.5,.5);\n\t\t// // flip it horizontally\n\t\t// arrowDown.scale.y *= -1;\n\t\t// arrowDown.fixedToCamera = true;\n\n\n\t\tvar mouth = this.mouth = this.add.sprite(this.camera.width*0.4, this.world.height*0.4, 'mouth');\n\t\tmouth.scale.setTo(0.1,0.1);\n\t\tmouth.anchor.setTo(0.5,0.5);\n\t\tmouth.fixedToCamera = true;\n\n\t\tvar nose = this.nose = this.add.sprite(this.camera.width*0.4, this.world.height*0.52, 'nose');\n\t\tnose.scale.setTo(0.1,0.1);\n\t\tnose.anchor.setTo(0.5,0.5);\n\t\t// flip it horizontally\n\t\t// arrowDown.scale.y *= -1;\n\t\tnose.fixedToCamera = true;\n\n\t\t// add text for the arrows explanation\n\t\tthis.mouthText = this.add.text(this.camera.width * 0.56, this.world.height*0.4, 'Jump and fly', {align: \"left\", boundsAlignH: \"left\", boundsAlignV: \"middle\"});\n\t\tthis.mouthText.anchor.setTo(0.5, 0.5);\n\t\t// fix to camera\n\t\tthis.mouthText.fixedToCamera = true;\n\n\t\tthis.noseText = this.add.text(this.camera.width * 0.58, this.world.height*0.52, 'Go under water', {align: \"left\", boundsAlignH: \"left\", boundsAlignV: \"middle\"});\n\t\tthis.noseText.anchor.setTo(0.5, 0.5);\n\t\t// fix to camera\n\t\tthis.noseText.fixedToCamera = true;\n\n\t\t// destroy the icons and text after 5 seconds\n\t\tthis.time.events.add(Phaser.Timer.SECOND * 5, function(){\n\t\t\t// debugger;\n\t\t\t// tween to make instructions nicely disappear\n\t\t\tthis.switchAlphaInstructions([this.mouth, this.nose, this.mouthText, this.noseText]);\n\t\t}, this);\n\n\n\t\t// hearts for health\n\t\tthis.hearts = this.add.group();\n\t\tfor(let i=0; i < 6; i++){\n\t\t\tthis.hearts.create(50 + i*45, 40, 'heartFull')\n\t\t}\n\t\t// change anchor and scale for all hearts\n\t\tthis.hearts.forEach(function (heart) {\n\t\t\theart.anchor.setTo(0.5, 0.5);\n\t\t\theart.scale.setTo(0.7, 0.7);\n\t\t});\n\t\t// fix to camera\n\t\tthis.hearts.fixedToCamera = true;\n\n\t\t// load overlay screen and hide it\n\t\tthis.overlayBackground = this.add.sprite(0, 0, 'overlay');\n\t\tthis.overlayBackground.x = this.camera.width * 0.5;\n\t\tthis.overlayBackground.y = this.camera.height * 0.5;\n\t\tthis.overlayBackground.anchor.set(0.5, 0.5);\n\n\t\tthis.overlayText = this.add.text(0, 0, 'Text goes here' , { align: \"center\", font: \"bold 24px Arial\", fill: \"#fff\"});\n\t\tthis.overlayText.anchor.set(0.5, 0.5);\n\n\t\t// add the text as child of the background container\n\t\tthis.overlayBackground.addChild(this.overlayText);\n\t\t// this.overlayText.fixedToCamera = true;\n\n\t\tthis.overlayBackground.fixedToCamera = true;\n\t\tthis.overlayBackground.visible = false;\n\t\tthis.overlayText.visible = false;\n\n\t\t// OK button for restarting the game\n\t\tthis.okBtn = this.add.sprite(this.camera.width * 0.5, this.camera.height * 0.6, 'button','blue_button04.png');\n\t\tthis.okBtn.anchor.set(0.5);\n\t\t// this.overlayBackground.addChild(this.okBtn);\n\t\tthis.okBtn.inputEnabled = true;\n\t\tthis.okBtn.input.useHandCursor = true;\n\t\tthis.okBtn.visible = false;\n\n\t\tthis.okBtnText = this.add.text(0,0,'Ja', {align: \"center\"});\n\t\tthis.okBtnText.anchor.set(0.5);\n\t\tthis.okBtn.addChild(this.okBtnText);\n\t\tthis.okBtn.fixedToCamera = true;\n\n\t\tthis.okBtn.events.onInputUp.add(function(){\n\t\t\t// setting instructions back to visible\n\t\t\tself.switchAlphaInstructions([self.mouth, self.nose, self.mouthText, self.noseText]);\n\n\t\t\tself.state.restart();\n\t\t});\n\n\t\t// Create pause button\n\t\tthis.pauseButton = this.add.image(this.camera.width - 40, 40, 'pauseButton');\n\t\tthis.pauseButton.scale.setTo(0.1,0.1);\n\t\tthis.pauseButton.anchor.setTo(0.5, 0.5);\n\t\tthis.pauseButton.inputEnabled = true;\n\t\t// fix to camera\n\t\tthis.pauseButton.fixedToCamera = true;\n\n\t\tthis.pauseButton.events.onInputUp.add(function () {\n\t\t\t// When the pause button is pressed, we pause the game\n\t\t\tconsole.log('button pressed!');\n\n\t\t\t// stop camera\n\t\t\tif(!self.stopTheCamera){\n\t\t\t\tself.stopTheCamera = true;\n\t\t\t} else {\n\t\t\t\tself.music.resume();\n\t\t\t\tself.paused = false;\n\t\t\t\tself.physics.arcade.isPaused = (!self.physics.arcade.isPaused);\n\t\t\t\tself.overlayBackground.visible = false;\n\n\t\t\t\tself.stopTheCamera = false;\n\t\t\t}\n\t\t});\n\n\t\t// define duck and its properties\n\t\tvar duck = this.duck = this.add.sprite(80, world.centerY+50, 'duck');\n\t\tduck.anchor.setTo(0.5, 0.5);\n\t\tthis.physics.arcade.enable(duck);\n\t\tduck.body.collideWorldBounds = true;\n\t\tduck.scale.set(2);\n\t\tduck.animations.add('walk', null, 5, true);\n\t\tduck.animations.play('walk');\n\n\t\tduck.body.allowDrag = true;\n\t\tduck.body.drag.set(0, 100);\n\t\tduck.body.maxVelocity.set(200, 400);\n\n\t\tthis.camera.follow(duck);\n\t\tthis.camera.deadzone = new Phaser.Rectangle(0, 0, 100, 400);\n\n\t\tgroundLayer.resizeWorld();\n\n\t\tvar cursors = this.cursors = this.input.keyboard.createCursorKeys();\n\n\t\tcursors.down.onDown.add(() => {\n\t\t\tif(this.duck.body.y > this.world.centerY - 35 && this.duck.body.y < this.world.height - 70 )\n\t\t\t\tthis.duck.body.velocity.y = 600;\n\t\t});\n\n\t\tcursors.up.onDown.add(() => {\n\t\t\tif( this.duck.body.y <= this.world.centerY + 50 && this.duck.body.y > 100 )\n\t\t\t\tthis.duck.body.velocity.y = -600;\n\t\t});\n  },\n\n  update: function () {\n\n  \tvar self = this;\n\n\t\t// if(this.duck.x > this.world.width * 0.05){\n  \t\t// this.state.start('menu');\n\t\t// }\n\n  \t/*\n  \t*\n  \t* MOVEMENT OF ELEMENTS\n  \t*\n  \t* */\n\n\t\tif(this.gameOver){\n\t\t\t// stop the whole scene\n\t\t\tthis.physics.arcade.isPaused = true;\n\t\t\tthis.paused = true;\n\n\t\t\t// stop the music, perhaps play another sound\n\t\t\tthis.music.stop();\n\n\t\t\t// display message for game over\n\t\t\tthis.displayOverlay('gameOver');\n\n\t\t} else if(this.stopTheCamera) {\n\t\t\tthis.paused = true;\n\t\t\tthis.physics.arcade.isPaused = true;\n\t\t\tthis.music.pause();\n\n\t\t\tthis.overlayBackground.visible = true;\n\t\t} else {\n\t\t\t// make the background scroll\n\t\t\tthis.background.tilePosition.x -= this.speed;\n\t\t}\n\n\t\t/*\n\t\t*\n\t\t* COLLISIONS\n\t\t*\n\t\t* */\n\n\t\tthis.physics.arcade.collide(this.duck, [this.scenarioLayer, this.foregroundLayer, this.underwaterLayer, this.enemies], this.duckCollision, this.duckProcessCallback, this);\n\t\tthis.physics.arcade.collide(this.duck, this.specialBoxesLayer, this.hitSpecialBoxes, null, this);\n\n\t\t// overlap with water\n\t\t// easier to check if duck is under a specific Y, instead of using overlap\n\t\tthis.duck.y >\t this.world.centerY+60 ? this.duck.alpha = 0.3 : this.duck.alpha = 1;\n\n\t\t// overlap with coins\n\t\tthis.physics.arcade.overlap(this.duck, this.coins, this.collectCoin, null, this);\n\n\n\t\t/*\n\t\t*\n\t\t* CONTROLS\n\t\t*\n\t\t* */\n\n\t\tthis.duck.body.velocity.x = this.speed*60;\n\n\t\t// Underwater gravity (boyancy)\n\t\tif( this.duck.body.y > this.world.centerY + 50){\n\t\t\tthis.physics.arcade.gravity.y = -800;\n\n\t\t\t// This 'gap' prevents the infinite bobbing\n\t\t}else if( this.duck.body.y < this.world.centerY + 20 && this.duck.body.y >= this.world.centerY + 25 ){\n\t\t\tthis.physics.arcade.gravity.thisy = 0;\n\n\t\t\t// Above water gravity\n\t\t}else if( this.duck.body.y < this.world.centerY + 20 ){\n\t\t\tthis.physics.arcade.gravity.y = 1000;\n\n\t\t\t// Surface tension\n\t\t\t// As the player passes through this area, the drag is more the faster they are going\n\t\t\t// This is the key to slowing the player down and preventing them from popping\n\t\t\t// out of the water, then back in, over and over.\n\t\t}else{\n\n\t\t\t// Have a slight amount of gravity so that if they end up resting in this area\n\t\t\t// they will gradually rise to the surface\n\t\t\tthis.physics.arcade.gravity.y = -120;\n\n\t\t\t// Caludlate the drag using the velocity\n\t\t\t// Faster the velocity, higher the drag\n\t\t\tconst drag = (( Math.abs(this.duck.body.velocity.y) * 200 ) / 400) + 50;\n\n\t\t\t// Don't do this if they are trying to swim down\n\t\t\tif( !this.cursors.down.isDown )\n\t\t\t\tthis.duck.body.drag.set(0, drag);\n\t\t}\n\n\t\t// This bit gives the player a little boost if they press and hold the cursor key rather than just tap\n\t\tif( this.cursors.up.isDown ){\n\t\t\tthis.duck.body.acceleration.y = -600;\n\t\t}else if( this.cursors.down.isDown ){\n\t\t\tthis.duck.body.acceleration.y = 600;\n\t\t}else{\n\t\t\tthis.duck.body.acceleration.y = 0;\n\t\t}\n  },\n\n  restart: function () {\n    this.state.restart();\n  },\n\n  quit: function () {\n    this.state.start('menu');\n  },\n\n\tduckProcessCallback: function(player, tile){\n\t\t// disable physics, so player can avoid getting stuck\n\t\treturn this.enableCollision;\n\t},\n\n\tduckCollision: function (player, object) {\n\n  \t// special actions if the object hit is a bee\n  \tif(object.key === 'bee'){\n  \t\t// object.destroy();\n\n  \t\t// spin and fall\n\t\t\tobject.animations.play('dead', 10, true);\n\t\t\tobject.body.allowGravity = true;\n\n\t\t}\n\n\t\t// do not count collisions on top/bottom of platforms as damaging for health\n  \tif(player.body.blocked.down || player.body.blocked.up){\n  \t\tconsole.log(\"Collision from above/below\");\n\t\t} else {\n\t\t\tthis.health -= 10;\n\t\t\tthis.enableCollision = false;\n\n\t\t\tthis.duck.tint = 0xFF3333;\n\t\t\tthis.add.tween(this.duck).to( { angle: 1440 }, 1000, Phaser.Easing.Linear.None, true);\n\t\t\tthis.add.tween(this.duck.scale).to( { x: 3, y: 3 }, 500, Phaser.Easing.Linear.None, true).yoyo(true);\n\n\t\t\t// update hearts count and display\n\t\t\tfor(let i = this.hearts.length-1; i > 0; i--){\n\t\t\t\tlet currentHeart = this.hearts.getAt(i);\n\n\t\t\t\tif(currentHeart.key === 'heartFull'){\n\t\t\t\t\tcurrentHeart.loadTexture('heartEmpty');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.health === 0){\n\t\t\t\tthis.gameOver = true;\n\t\t\t}\n\n\t\t\t// set timer to put the collisions back to normal after a while\n\t\t\tthis.time.events.add(Phaser.Timer.SECOND * 3, this.resetPlayer, this);\n\t\t}\n\t},\n\n\tresetPlayer: function (){\n\t\t// this.duck.alpha = 1;\n\t\tthis.duck.tint = 0xFFFFFF;\n\t\tthis.enableCollision = true;\n\t},\n\t\n\tcollectCoin: function (player, coin) {\n\t\tthis.score += this.coinValue;\n\t\tthis.scoreText.setText('score: ' + this.score);\n  \tcoin.kill();\n\t},\n\n\thitSpecialBoxes: function(player, box){\n\t\t/*\n\t\t*\n\t\t* Randomly, the boxes could mean:\n\t\t* - player gets additional heart\n\t\t* - for the next 5 seconds, all coins give double amount of points\n\t\t*\n\t\t* */\n\n\t\tvar self = this;\n\n\t\t// remove the element from the screen\n\t\tthis.map.removeTile(box.x, box.y, this.specialBoxesLayer);\n\n\t\tvar choice = this.rnd.between(0,100);\n\t\tif(choice > 50){\n\t\t\t// get additional heart, if one has been lost already\n\t\t\tfor(let i = 0; i < this.hearts.length; i++){\n\t\t\t\tlet currentHeart = this.hearts.getAt(i);\n\n\t\t\t\tif(currentHeart.key === 'heartEmpty'){\n\t\t\t\t\tcurrentHeart.loadTexture('heartFull');\n\n\t\t\t\t\t// update health value as well\n\t\t\t\t\tthis.health += 10;\n\n\t\t\t\t\tthis.showAndRemoveText(this.infoText, 'One heart recovered!');\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif(i === this.hearts.length-1){\n\t\t\t\t\tthis.showAndRemoveText(this.infoText,'Already had max health!');\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// double amount of points for 5 seconds\n\t\t\tthis.coinValue = 20;\n\n\t\t\t// set timer to put the collisions back to normal after a while\n\t\t\tthis.time.events.add(Phaser.Timer.SECOND * 5, function(){\n\t\t\t\tself.coinValue = 10;\n\t\t\t}, this);\n\n\t\t\tthis.showAndRemoveText(this.infoText,'All coins are double value for 5 seconds!');\n\n\t\t\tthis.coins.forEach(function(coin){\n\t\t\t\tself.add.tween(coin.scale).to( { x: 1.5, y: 1.5}, 500, Phaser.Easing.Quadratic.InOut, true);\n\t\t\t});\n\n\t\t\t// destroy it after 3 seconds\n\t\t\tthis.time.events.add(Phaser.Timer.SECOND * 5, function(){\n\t\t\t\tthis.coins.forEach(function(coin){\n\t\t\t\t\tself.add.tween(coin.scale).to( { x: 1, y: 1 }, 500, Phaser.Easing.Quadratic.InOut, true);\n\t\t\t\t});\n\t\t\t}, this);\n\t\t}\n\n\t},\n\n\ttogglePause: function (isPaused) {\n\n\t},\n\n\tshowAndRemoveText: function (text, message) {\n\n  \t//display info text\n\t\ttext.setText(message);\n\t\ttext.visible = true;\n\n\t\t// destroy it after 5 seconds\n\t\tthis.time.events.add(Phaser.Timer.SECOND * 5, function(){\n\t\t\ttext.visible=false;\n\t\t}, this);\n\t},\n\n\tswitchAlphaInstructions: function(arrayElements){\n\t\t// if alpha is 0, switch it on. If it's one, do the tween in a for loop for the array\n\n\t\tfor(let i = 0; i < arrayElements.length; i++){\n\n\t\t\tthis.add.tween(arrayElements[i]).to( { alpha: 0 }, 500, \"Linear\", true);\n\t\t\t// if(arrayElements[i].alpha === 0){\n\t\t\t// \tarrayElements[i].alpha = 1;\n\t\t\t// } else {\n\t\t\t// \tarrayElements[i].alpha = 0;\n\t\t\t// \tthis.add.tween(arrayElements[i]).to( { alpha: 0 }, 500, \"Linear\", true);\n\t\t\t// \ttween.onComplete.add(function(){\n\t\t\t// \t\tarrayElements[i].kill();\n\t\t\t// \t}, this)\n\t\t\t// }\n\t\t}\n\t},\n\n\tdisplayOverlay: function(gameState){\n\t\tthis.overlayBackground.visible = true;\n\t\tthis.overlayText.visible = true;\n\n  \t// gamestate can have values \"pause\", \"gameOver\", \"gameEnd\"\n\t\tif(gameState === 'pause'){\n\n\t\t} else if(gameState === 'gameOver'){\n\t\t\t// this.overlayText.inputEnabled = true;\n\t\t\tthis.overlayText.setText('Well done! Play again?');\n\t\t\tthis.okBtn.visible = true;\n\n\t\t} else if(gameState === 'gameEnd'){\n\n\t\t} else {\n\t\t\tconsole.log('You are not supposed to be here...');\n\t\t}\n\t}\n\n};\n","module.exports = {\n\n  create: function () {\n\n\t\tvar title = this.add.text(this.world.centerX, 200, 'Login', {\n      fill: 'white',\n      font: '80px Arial'\n    });\n    title.anchor.set(0.5);\n    // title.alignIn(this.world, Phaser.CENTER);\n\n\t\tthis.nameInput = this.add.inputField(this.world.centerX - 140, this.world.centerY - 50, {\n\t\t\tfont: '20px Arial',\n\t\t  width: 250,\n      padding: 16,\n\t\t\tborderWidth: 3,\n\t\t\tborderColor: '#2cc0ff',\n\t\t\tborderRadius: 6,\n      placeHolder: 'Name'\n    });\n\n\t\tthis.passwordInput = this.add.inputField(this.world.centerX - 140, this.world.centerY + 25, {\n\t\t\tfont: '20px Arial',\n\t\t\twidth: 250,\n\t\t\tpadding: 16,\n\t\t\tborderWidth: 3,\n\t\t\tborderColor: '#2cc0ff',\n\t\t\tborderRadius: 6,\n\t\t\tplaceHolder: 'Password',\n\t\t\ttype: PhaserInput.InputType.password\n\t\t});\n\n\t\tvar xhr  = new XMLHttpRequest();\n\t\txhr.open('GET', 'https://duchennegame.herokuapp.com/api/users', true);\n\t\txhr.onload = function () {\n\t\t\tvar users = JSON.parse(xhr.responseText);\n\t\t\tif (xhr.readyState == 4 && xhr.status == \"200\") {\n\t\t\t\tconsole.table(users);\n\t\t\t} else {\n\t\t\t\tconsole.error(users);\n\t\t\t}\n\t\t};\n\t\txhr.send(null);\n\n\t\t// login button and text\n\t\tvar checkLoginBtn = this.checkLoginBtn= this.add.sprite(this.world.centerX, this.world.centerY+140, 'button', 'blue_button04.png');\n\t\tcheckLoginBtn.anchor.set(0.5,0.5);\n\t\tcheckLoginBtn.inputEnabled = true;\n\t\tcheckLoginBtn.input.useHandCursor = true;\n\n\t\tvar chechLoginText = this.add.text(0,0,'Login', {align: \"center\"});\n\t\tchechLoginText.anchor.set(0.5,0.5);\n\n\t\tcheckLoginBtn.addChild(chechLoginText);\n\n\t\tdebugger;\n\t\tcheckLoginBtn.events.onInputDown.add(this.checkLogin(this.nameInput.value, this.passwordInput.value).bind(this), this);\n\n\n    // this.input.onTap.add(this.startGame.bind(this));\n  },\n\n  startGame: function () {\n    this.state.start('game');\n  },\n\n  checkLogin: function(name, password) {\n    console.table(name, password);\n  }\n\n};\n","module.exports = {\n\n  create: function () {\n    var title = this.add.text(0, 0, 'Duck Quest', {\n      fill: 'white',\n      font: '100px fantasy'\n    });\n    title.alignIn(this.world, Phaser.CENTER);\n\n    // login button and text\n    var loginButton = this.button = this.add.sprite(this.world.centerX, this.world.centerY+100, 'button', 'blue_button04.png');\n\t\tloginButton.anchor.set(0.5,0.5);\n\t\tloginButton.inputEnabled = true;\n\t\tloginButton.input.useHandCursor = true;\n\n\t\tvar logintext = this.add.text(0,0,'Login', {align: \"center\"});\n\t\tlogintext.anchor.set(0.5,0.5);\n\n\t\tloginButton.addChild(logintext);\n\t\tloginButton.events.onInputDown.add(this.loginPage, this);\n\n    // this.input.onTap.add(this.startGame.bind(this));\n\n    // add login and sign in buttons\n\t\t// this.state.start('login');\n  },\n\n  startGame: function () {\n    this.state.start('game');\n  },\n\n  loginPage: function () {\n\t\tthis.state.start('login');\n\t}\n\n};\n"]}